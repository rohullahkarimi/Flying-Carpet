<!DOCTYPE html>
<html lang="en">
	<head>
		<title>three.js webgl - geometry - cube</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">		
	</head>
	<body>
        <script src="js/three.js"></script>
		
		
        <script src="https://threejs.org/examples/js/controls/OrbitControls.js"></script>
		
		<script src="https://threejs.org/examples/js/loaders/DDSLoader.js"></script>
		<script src="https://threejs.org/examples/js/loaders/MTLLoader.js"></script>
		<script src="https://threejs.org/examples/js/loaders/OBJLoader.js"></script>

		<script src="https://threejs.org/examples/js/controls/DeviceOrientationControls.js"></script>
		<script src="https://threejs.org/examples/js/effects/StereoEffect.js"></script>

		<script src="https://threejs.org/examples/js/loaders/TTFLoader.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/opentype.js@latest/dist/opentype.min.js"></script>
		
		<script  src="https://threejs.org/examples/js/loaders/ColladaLoader.js"></script>
		<script>			
            // variables
			var camera, scene, stats, scene1, scene2, light1, light2, renderer;
			var mesh;
			var font2;

			
            // functions
			init();
			animate();
			//ColladaLoader();
			
            function init() {
                // camera
				camera = new THREE.PerspectiveCamera( 70, window.innerWidth / window.innerHeight, 1, 5000 );
				camera.position.z = 400;

                // scene
                scene = new THREE.Scene();

 
                // texture
                var texture = new THREE.TextureLoader().load('images/floor.jpg');
                var texture_house = new THREE.TextureLoader().load('images/house.jpg');
                var textureForSky = new THREE.TextureLoader().load( 'images/earthcloudmap.jpg' );
               

                //BoxBufferGeometry(width : Float, height : Float, depth : Float, widthSegments : Integer, heightSegments : Integer, depthSegments : Integer)
				var geometry = new THREE.CylinderBufferGeometry( 500, 50, 200, 10 );    // for land shape
                var material = new THREE.MeshBasicMaterial({ map: texture, side: THREE.DoubleSide });  // meterial
				var cylinder = new THREE.Mesh( geometry, material );
				scene.add( cylinder );
				
                var materialForSky = new THREE.MeshBasicMaterial( { map: textureForSky, side: THREE.DoubleSide } );  // meterial

                // representing triangle, can use SkinnedMesh too
				mesh = new THREE.Mesh( geometry, material );
                scene.add(mesh);     // add , Mesh to scene


                //var scene = new THREE.Scene();
                fogColor = new THREE.Color(0xffffff);
 
               // scene.background = fogColor;
                scene.fog = new THREE.FogExp2(fogColor, 0.0010, 25);



                
				var house1 = new THREE.BoxBufferGeometry(30, 100, 30);    // box shape
				//var house2 = new THREE.BoxBufferGeometry(60, 200, 30);    // box shape
				var material2 = new THREE.MeshLambertMaterial({ map: texture_house, side: THREE.DoubleSide });  // meterial
				mesh2 = new THREE.Mesh(house1, material2);
				//mesh3 = new THREE.Mesh(house2, material2);
				scene.add(mesh2);
				mesh2.position.y = 150;
				//mesh3.position.x = 60; mesh3.position.y = 100;
      


                // skybox
				var geometry = new THREE.BoxBufferGeometry( 2000, 2000, 2000 );    // box shape
                var mesh4 = new THREE.Mesh(geometry, materialForSky);  // meterial
                scene.add(mesh4);

				// TEXT 

				// font loader 
				
				const loader1 = new THREE.TTFLoader()
				const fontLoader = new THREE.FontLoader()
				
				loader1.load('./font/Roboto-Medium.ttf',fnt => {
					font2 = fontLoader.parse(fnt);
					var geometryText = new THREE.TextGeometry( 'MY WORLD', {
						font: font2,
						size: 80,
						height: 5,
						curveSegments: 12,
						bevelEnabled: true,
						bevelThickness: 10,
						bevelSize: 8,
						bevelOffset: 0,
						bevelSegments: 5
					} );

					textMesh = new THREE.Mesh(geometryText, material2);  // meterial
                	scene.add(textMesh);
					textMesh.position.y = 150;
					textMesh.position.x = -300;
					textMesh.position.z = -300;	
				});
					
				// end... text with font.
		

			
                // White directional light at half intensity shining from the top.
                var directionalLight = new THREE.DirectionalLight(0xffffff, 1.5);
                directionalLight.position.set(200, 100, 100);
                scene.add( directionalLight );


				// loading manager model 1   DAE
			
				//var ColladaLoader = require('loaders/colladaLoader.js'); 
				
				var loader = new THREE.ColladaLoader();
				loader.load("./model/elf.dae", function (collada) {
					dae = collada.scene;

					dae.position.y = 110;
					dae.position.x = -150;
					dae.scale.x = dae.scale.y = dae.scale.z = 10;

					//dae.scale.x = dae.scale.y = dae.scale.z = 0.09;
					//dae.position.set(0, controls.userHeight - 8, -16)
					dae.updateMatrix();
					scene.add(dae);
		
				}, onProgress, onError );
				
				// for test
				/*
				var loader = new THREE.OBJLoader();
				loader.load
				{
					"./model/pressure.json",
					function(objeck)
					{
						scene.add(object);
					}
				};
				*/
				// end .. model 1
				
				
				
				// start of model 2 penkki
				var onProgress = function ( xhr ) {
					if ( xhr.lengthComputable ) {
						var percentComplete = xhr.loaded / xhr.total * 100;
						console.log( Math.round( percentComplete, 2 ) + '% downloaded' );
					}
				};
				var onError = function () { };
				var manager = new THREE.LoadingManager();
				manager.addHandler( /\.dds$/i, new THREE.DDSLoader() );
				// comment in the following line and import TGALoader if your asset uses TGA textures
				// manager.addHandler( /\.tga$/i, new TGALoader() );
				new THREE.MTLLoader( manager )
					.setPath( './model/' )
					.load( 'materials.mtl', function ( materials ) {
						materials.preload();
						new THREE.OBJLoader( manager )
							.setMaterials( materials )
							.setPath( './model/' )
							.load( 'model.obj', function ( object ) {
								object.position.y = 110;
								object.position.x = 150;
								object.scale.x = object.scale.y = object.scale.z = 90;
								scene.add( object );
							}, onProgress, onError );
					} );
				//
				// end... model 
				

                // renderer the variables
                renderer = new THREE.WebGLRenderer({ antialias: true });
                //scene.background = new THREE.Color("lightblue");
				renderer.setPixelRatio( window.devicePixelRatio );
				renderer.setSize( window.innerWidth, window.innerHeight );
				document.body.appendChild( renderer.domElement );

                // allow the camera to orbit around a target
               //controls = new THREE.OrbitControls(camera, renderer.domElement);

				controls = new THREE.OrbitControls(camera, renderer.domElement);
				// DeviceOrientationControls

				window.addEventListener( 'resize', onWindowResize, false );

			}

			function onWindowResize() {

				camera.aspect = window.innerWidth / window.innerHeight;
				camera.updateProjectionMatrix();

				renderer.setSize( window.innerWidth, window.innerHeight );

			}

			function animate() {

				requestAnimationFrame( animate );

                // rotation of mesh. mesh include geometry and material
				//mesh.rotation.x += 0.005;
				//mesh.rotation.y += 0.01;

                controls.update();
                renderer.render(scene, camera);
			}
        /*
         * // Canvas, where the renderer draws its output
         * 
         *
         *
         * */


			// text loader 
				/*
				var loader1 = new THREE.FontLoader();
				var loader = new THREE.FontLoader();
				loader.load( 'https://threejs.org/examples/fonts/helvetiker_regular.typeface.json', function ( font ) {

					var geometryText = new THREE.TextGeometry( 'MY WORLD', {
						font: font,
						size: 80,
						height: 5,
						curveSegments: 12,
						bevelEnabled: true,
						bevelThickness: 10,
						bevelSize: 8,
						bevelOffset: 0,
						bevelSegments: 5
					} );

					textMesh = new THREE.Mesh(geometryText, material2);  // meterial
                	scene.add(textMesh);
					textMesh.position.y = 150;
					textMesh.position.x = -300;
					textMesh.position.z = -300;	

				});
				*/
				// END.. TEXT


				/*  SPOTLIGHT 
                var spotLight = new THREE.SpotLight( 0xffffff );
                spotLight.position.set( 200, 100, 500 );
                scene.add(spotLight);


                var spotLightHelper = new THREE.SpotLightHelper( spotLight );
                scene.add( spotLightHelper );

				*/



		</script>
	</body>
</html>


